<html lang="en">
<head>
<title>Conditions - GNU Smalltalk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Smalltalk User's Guide">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Code-blocks-_0028I_0029.html#Code-blocks-_0028I_0029" title="Code blocks (I)">
<link rel="next" href="Iteration.html#Iteration" title="Iteration">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with no Front-Cover Texts,
     and with no Back-Cover Texts.  A copy of the license is included
     in the section entitled ``GNU Free Documentation License''.
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Conditions"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Iteration.html#Iteration">Iteration</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Code-blocks-_0028I_0029.html#Code-blocks-_0028I_0029">Code blocks (I)</a>
<hr>
</div>

<h4 class="subsection">6.6.1 Conditions and decision making</h4>

<p>Let's first add some code to keep you from writing too
many checks.  We will simply update our current method for
the Checking class; if you have entered the methods from the
previous chapters, the old definition will be overridden by
this new one.
<pre class="example">     Checking extend [
         writeCheck: amount
            | num |
     
            (checksleft &lt; 1)
                ifTrue: [ ^self error: 'Out of checks' ].
            num := checknum.
            checknum := checknum + 1.
            checksleft := checksleft - 1.
            self spend: amount
            ^ num
        ]
     ]
</pre>
   <p>The two new lines are:
<pre class="example">        (checksleft &lt; 1)
            ifTrue: [ ^self error: 'Out of checks' ].
</pre>
   <p>At first glance, this appears to be a completely new structure. 
But, look again!  The only new construct is the square
brackets, which appear within a method and not only surround it.

   <p>The first line is a simple boolean expression.  <code>checksleft</code>
is our integer, as initialized by our Checking class. 
It is sent the message <code>&lt;</code>, and the argument 1.  The current
number bound to <code>checksleft</code> compares itself against 1, and
returns a boolean object telling whether it is less than 1.

   <p>Now this boolean, which is either true or false, is sent the
message <code>ifTrue:</code>, with an argument which is called a code
block.  A code block is an object, just like any other.  But
instead of holding a number, or a Set, it holds executable
statements.  So what does a boolean do with a code block which
is an argument to a <code>ifTrue:</code> message?  It depends on which boolean! 
If the object is the <code>true</code> object, it executes the code
block it has been handed.  If it is the <code>false</code> object, it
returns without executing the code block.  So the traditional
<i>conditional construct</i> has been replaced in
Smalltalk with boolean objects which execute the indicated
code block or not, depending on their truth-value. 
<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>

   <p>In the case of our example, the actual code within the
block sends an error message to the current object.  <code>error:</code>
is handled by the parent class Object, and will pop up an
appropriate complaint when the user tries to write too many
checks.  In general, the way you handle a fatal error in
Smalltalk is to send an error message to yourself (through
the <code>self</code> pseudo-variable), and let the error handling
mechanisms inherited from the Object class take over.

   <p>As you might guess, there is also an <code>ifFalse:</code> message
which booleans accept.  It works exactly like <code>ifTrue:</code>,
except that the logic has been reversed; a boolean <code>false</code>
will execute the code block, and a boolean <code>true</code> will not.

   <p>You should take a little time to play with this method
of representing conditionals.  You can run your checkbook,
but can also invoke the conditional functions directly:
<pre class="example">        true ifTrue: [ 'Hello, world!' printNl ]
        false ifTrue: [ 'Hello, world!' printNl ]
        true ifFalse: [ 'Hello, world!' printNl ]
        false ifFalse: [ 'Hello, world!' printNl ]
</pre>
   <div class="footnote">
<hr>
<h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> It is interesting to note that because of the
way conditionals are done, conditional constructs
are not part of the Smalltalk language, instead they are
merely a defined behavior for the Boolean class of
objects.</p>

   <p><hr></div>

   </body></html>

