<html lang="en">
<head>
<title>Dynamic Strings - GNU Smalltalk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Smalltalk User's Guide">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Streams.html#Streams" title="Streams">
<link rel="prev" href="Files.html#Files" title="Files">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with no Front-Cover Texts,
     and with no Back-Cover Texts.  A copy of the license is included
     in the section entitled ``GNU Free Documentation License''.
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Dynamic-Strings"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Files.html#Files">Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Streams.html#Streams">Streams</a>
<hr>
</div>

<h4 class="subsection">6.10.4 Dynamic Strings</h4>

<p>Streams provide a powerful abstraction for a number of
data structures.  Concepts like current position, writing
the next position, and changing the way you view a data
structure when convenient combine to let you write compact,
powerful code.  The last example is taken from the actual
Smalltalk source code&mdash;it shows a general method for making
an object print itself onto a string.

<pre class="example">        printString [
            | stream |
            stream := WriteStream on: (String new).
            self printOn: stream.
            ^stream contents
        ]
</pre>
   <p>This method, residing in Object, is inherited by every
class in Smalltalk.  The first line creates a WriteStream
which stores on a String whose length is currently 0
(<code>String new</code> simply creates an empty string.  It
then invokes the current object with <code>printOn:</code>.  As the
object prints itself to &ldquo;stream&rdquo;, the String grows to accommodate
new characters.  When the object is done printing,
the method simply returns the underlying string.

   <p>As we've written code, the assumption has been that
printOn: would go to the terminal.  But replacing a stream
to a file like <samp><span class="file">/dev/tty</span></samp> with a stream to a data
structure (<code>String new</code>) works just as well.  The last line
tells the Stream to return its underlying collection, which will
be the string which has had all the printing added to it.  The
result is that the <code>printString</code> message returns an object of
the String class whose contents are the printed representation
of the very object receiving the message.

   </body></html>

