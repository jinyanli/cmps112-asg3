<html lang="en">
<head>
<title>Inheritance and Polymorphism - GNU Smalltalk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Smalltalk User's Guide">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="More-subclassing.html#More-subclassing" title="More subclassing">
<link rel="prev" href="New-kinds-of-Numbers.html#New-kinds-of-Numbers" title="New kinds of Numbers">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with no Front-Cover Texts,
     and with no Back-Cover Texts.  A copy of the license is included
     in the section entitled ``GNU Free Documentation License''.
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Inheritance-and-Polymorphism"></a>
Previous:&nbsp;<a rel="previous" accesskey="p" href="New-kinds-of-Numbers.html#New-kinds-of-Numbers">New kinds of Numbers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="More-subclassing.html#More-subclassing">More subclassing</a>
<hr>
</div>

<h4 class="subsection">6.9.4 Inheritance and Polymorphism</h4>

<p>This is a good time to look at what we've done with the
two previous examples at a higher level.  With the
NiledArray class, we inherited almost all of the functionality
ality of arrays, with only a little bit of code added to
address our specific needs.  While you may have not thought
to try it, all the existing methods for an Array continue to
work without further effort-you might find it interesting to
ponder why the following still works:
<pre class="example">        a := NiledArray new: 10
        a at: 5 put: 1234
        a do: [:i| i printNl ]
</pre>
   <p>The strength of inheritance is that you focus on the incremental
changes you make; the things you don't change will generally
continue to work.

   <p>In the Complex class, the value of polymorphism was
exercised.  A Complex number responds to exactly the same
set of messages as any other number.  If you had handed this
code to someone, they would know how to do math with Complex
numbers without further instruction.  Compare this with C,
where a complex number package would require the user to
first find out if the complex-add function was
complex_plus(), or perhaps complex_add(), or add_complex(),
or<small class="dots">...</small>

   <p>However, one glaring deficiency is present in the Complex class:
what happens if you mix normal numbers with Complex numbers? 
Currently, the Complex class assumes that it will only
interact with other Complex numbers.  But this is unrealistic:
mathematically, a &ldquo;normal&rdquo; number is simply one with an
imaginary part of 0.  Smalltalk was designed to allow numbers
to coerce themselves into a form which will work with
other numbers.

   <p>The system is clever and requires very little additional
code.  Unfortunately, it would have tripled the
amount of explanation required.  If you're interested in how
coercion works in <span class="sc">gnu</span> Smalltalk, you should find the
Smalltalk library source, and trace back the execution of
the <code>retry:coercing:</code> messages.  You want to consider the
value which the <code>generality</code> message returns for each type
of number.  Finally, you need to examine the <code>coerce:</code> handling
in each numeric class.

   </body></html>

