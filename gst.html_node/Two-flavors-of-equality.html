<html lang="en">
<head>
<title>Two flavors of equality - GNU Smalltalk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="GNU Smalltalk User's Guide">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Behind-the-scenes.html#Behind-the-scenes" title="Behind the scenes">
<link rel="prev" href="Inside-Arrays.html#Inside-Arrays" title="Inside Arrays">
<link rel="next" href="Why-is-_0023new-there_003f_0021_003f.html#Why-is-_0023new-there_003f_0021_003f" title="Why is #new there?!?">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.2 or any later version published by the Free Software
     Foundation; with no Invariant Sections, with no Front-Cover Texts,
     and with no Back-Cover Texts.  A copy of the license is included
     in the section entitled ``GNU Free Documentation License''.
   -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Two-flavors-of-equality"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Why-is-_0023new-there_003f_0021_003f.html#Why-is-_0023new-there_003f_0021_003f">Why is #new there?!?</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Inside-Arrays.html#Inside-Arrays">Inside Arrays</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Behind-the-scenes.html#Behind-the-scenes">Behind the scenes</a>
<hr>
</div>

<h4 class="subsection">6.12.2 Two flavors of equality</h4>

<p>As first seen in chapter two, Smalltalk keys its dictionary
with things like <i>#word</i>, whereas we generally use
<i>'word'</i>.  The former, as it turns out, is from class Symbol. 
The latter is from class String.  What's the real difference
between a Symbol and a String?  To answer the question, we'll
use an analogy from C.

   <p>In C, if you have a function for comparing strings, you
might try to write it:
<pre class="example">        streq(char *p, char *q)
        {
            return (p == q);
        }
</pre>
   <p>But clearly this is wrong!  The reason is that you can have
two copies of a string, each with the same contents but each
at its own address.  A correct string compare must walk its
way through the strings and compare each element.

   <p>In Smalltalk, exactly the same issue exists, although
the details of manipulating storage addresses are hidden. 
If we have two Smalltalk strings, both with the same contents,
we don't necessarily know if they're at the same
storage address.  In Smalltalk terms, we don't know if
they're the same object.

   <p>The Smalltalk dictionary is searched frequently.  To
speed the search, it would be nice to not have to compare
the characters of each element, but only compare the address
itself.  To do this, you need to have a guarantee that all
strings with the same contents are the same object.  The
String class, created like:
<pre class="example">        y := 'Hello'
</pre>
   <p>does not satisfy this.  Each time you execute this line, you
may well get a new object.  But a very similar class, Symbol,
will always return the same object:
<pre class="example">        y := #Hello
</pre>
   <p>In general, you can use strings for almost all your tasks. 
If you ever get into a performance-critical function which
looks up strings, you can switch to Symbol.  It takes longer
to create a Symbol, and the memory for a Symbol is never
freed (since the class has to keep tabs on it indefinitely
to guarantee it continues to return the same object).  You
can use it, but use it with care.

   <p>This tutorial has generally used the strcmp()-ish kind of
checks for equality.  If you ever need to ask the question
&ldquo;is this the same object?&rdquo;, you use the <code>==</code> operator
instead of <code>=</code>:
<pre class="example">        x := y := 'Hello'
        (x = y) printNl
        (x == y) printNl
        y := 'Hel', 'lo'
        (x = y) printNl
        (x == y) printNl
        x := #Hello
        y := #Hello
        (x = y) printNl
        (x == y) printNl
</pre>
   <p>Using C terms, <code>=</code> compares contents like <code>strcmp()</code>. 
<code>==</code> compares storage addresses, like a pointer comparison.

   </body></html>

